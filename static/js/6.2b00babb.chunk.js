(this["webpackJsonpgovernance-dapp"]=this["webpackJsonpgovernance-dapp"]||[]).push([[6],{1269:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(65),r=Object(n.a)((function(){return a.e(12).then(a.bind(null,1291))}),(function(e){return e.Header}))},1270:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(65),r=Object(n.a)((function(){return a.e(11).then(a.bind(null,1290))}),(function(e){return e.Footer}))},1276:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(45);function r(e,t,a,r,c,l){return n.a.send("governorAlpha","propose",[e,t,a,r,c,{from:l}],{type:"propose"})}function c(){return n.a.call("governorAlpha","proposalCount",[]).then((function(e){return Number(e)}))}},1277:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),c=a(352),l={green:"bg-green-500",red:"bg-red-600",gray:"bg-gray-600",indigo:"bg-indigo-600"};function o(e){var t=Math.min(Math.round(e.value/e.max*100)||0,100);return r.a.createElement("div",{className:"w-full flex flex-row flex-no-wrap items-center justify-between mt-3"},r.a.createElement("div",{className:"bg-opacity-25 ".concat(l[e.color]," h-1 rounded w-full")},r.a.createElement("div",{className:"".concat(l[e.color]," h-1 rounded"),style:{width:"".concat(t,"%")}})),e.showVotes&&r.a.createElement("div",{className:"w-2/6 pl-3 text-xs"},Object(c.f)(e.value)))}},1286:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(86),r=a(205);function c(){var e=Object(n.d)(r.a),t=e.connected,a=e.address;return t&&!!a}},1287:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(354),r=a(105),c=a(0),l=a(86),o=a(45),u=a(205);function s(e,t){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];var m=Object(l.d)(u.a),f=m.syncBlockNumber,d=Object(c.useState)({value:null,loading:!0,error:null}),b=Object(r.a)(d,2),v=b[0],p=b[1];return Object(c.useEffect)((function(){p((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!0,error:null})}));try{o.a.call(e,t,s).then((function(e){p((function(t){return Object(n.a)(Object(n.a)({},t),{},{value:e,loading:!1,error:null})}))})).catch((function(e){console.error(e),p((function(t){return Object(n.a)(Object(n.a)({},t),{},{loading:!1,value:null,error:e})}))}))}catch(a){p((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1,value:null,error:a})}))}return function(){}}),[e,t,JSON.stringify(s),f]),v}},1300:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(86),r=a(205);function c(){var e=Object(n.d)(r.a).address;return e||""}},1417:function(e,t,a){"use strict";a.r(t),a.d(t,"StakePage",(function(){return re}));var n=a(5),r=a.n(n),c=a(75),l=a(105),o=a(0),u=a.n(o),s=a(86),i=a(207),m=a(351),f=a(339),d=a(430),b={},v=Object(d.a)({name:"stakePage",initialState:b,reducers:{someAction:function(e,t){}}}),p=(v.actions,v.reducer),g=v.name,x=a(76),E=Object(x.a)([function(e){return e.stakePage||b}],(function(e){return e})),w=r.a.mark(h);function h(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),w)}var k=a(1269),O=a(1270),j=a(1277),N=a(1300),y=a(45),S=a(352);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ether";return Object(S.i)(e,t)}var A=a(1287);function T(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=arguments.length,r=new Array(n>3?n-3:0),c=3;c<n;c++)r[c-3]=arguments[c];var u=A.a.apply(void 0,[e,t].concat(r)),s=u.value,i=u.loading,m=u.error,f=Object(o.useState)(null!==s?s:a),d=Object(l.a)(f,2),b=d[0],v=d[1];return Object(o.useEffect)((function(){v(null!==s?s:a)}),[s,JSON.stringify(a)]),{value:b,loading:i,error:m}}function B(e){return T("sovToken","balanceOf","0",e||S.c)}var L=a(1317),V=a.n(L);function D(e,t,a,n){return y.a.send("staking","stake",[e,V()(t).diff(V()(),"seconds"),S.c,S.c,{from:a,nonce:n,gasLimit:25e4}],{type:"stake"})}function F(e,t,a){return y.a.send("sovToken","approve",[Object(S.d)("staking").address,e,{from:t,nonce:a}],{type:"approve"})}function P(e,t){return y.a.send("staking","withdraw",[e,t,{from:t}],{type:"withdraw"})}function I(e){return y.a.call("sovToken","allowance",[e,Object(S.d)("staking").address])}function M(e,t,a){return y.a.send("staking","increaseStake",[e,S.c,{from:t,nonce:a,gasLimit:25e4}],{type:"stake"})}function Y(e,t){return y.a.send("staking","extendStakingDuration",[e+86400,{from:t}],{type:"extend"})}var J=a(1281),R=a(1289),X=a(1288),q=a(1411),z=q.a.ofType();function $(e){var t=Object(o.useState)([]),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(o.useState)([]),s=Object(l.a)(c,2),i=s[0],m=s[1];Object(o.useEffect)((function(){if(e.kickoffTs){for(var t=[],a=V()(1e3*e.kickoffTs).clone(),n=1;n<=78;n++){var c=a.add(2,"weeks");t.push(c.clone().toDate())}r(t)}}),[e.kickoffTs]),Object(o.useEffect)((function(){var t=[];if(e.startTs)t=n.filter((function(t){return t.getTime()>e.startTs}));else{var a=Date.now();t=n.filter((function(e){return e.getTime()>a}))}m(t.map((function(e){return{key:e.getTime(),label:e.toLocaleDateString(),date:e}})))}),[n,e.startTs]);var f=Object(o.useCallback)((function(){return i.find((function(t){return t.key===e.value}))}),[i,e.value]),d=Object(o.useState)(f()),b=Object(l.a)(d,2),v=b[0],p=b[1];return Object(o.useEffect)((function(){p(f())}),[f,e.value,i]),u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2"},e.title),u.a.createElement(z,{items:i,itemRenderer:H,filterable:!0,itemPredicate:W,onItemSelect:function(t){return e.onChange(t.key)},itemsEqual:G,activeItem:v,noResults:u.a.createElement(X.a,{disabled:!0,text:"No more dates available for staking."})},u.a.createElement(J.a,{icon:"calendar",text:u.a.createElement(R.a,{ellipsize:!0},v?v.label:"Select date"),rightIcon:"caret-down"})))}var H=function(e,t){var a=t.handleClick,n=t.modifiers,r=t.query;return n.matchesPredicate?u.a.createElement(X.a,{active:n.active,disabled:n.disabled,key:e.key,onClick:a,text:u.a.createElement(R.a,{ellipsize:!0},K(e.label,r))}):null},W=function(e,t,a,n){var r=t.label.toLowerCase(),c=e.toLowerCase();return n?r===c:r.indexOf(c)>=0};function G(e,t){return e.key===t.key}function K(e,t){var a=0,n=t.split(/\s+/).filter((function(e){return e.length>0})).map(Q);if(0===n.length)return[e];for(var r=new RegExp(n.join("|"),"gi"),c=[];;){var l=r.exec(e);if(!l)break;var o=l[0].length,s=e.slice(a,r.lastIndex-o);s.length>0&&c.push(s),a=r.lastIndex,c.push(u.a.createElement("strong",{key:a},l[0]))}var i=e.slice(a);return i.length>0&&c.push(i),c}function Q(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function U(e){return u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",{className:"mb-4"},u.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amount"},"Amount to stake"),u.a.createElement("div",{className:"flex space-x-4"},u.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",type:"text",placeholder:"Amount",value:e.amount,onChange:function(t){return e.onChangeAmount(Object(S.e)(t))}}),u.a.createElement("button",{type:"button",className:"",onClick:function(){return e.onChangeAmount(Object(S.b)(e.sovBalanceOf.value))}},"MAX")),u.a.createElement("div",{className:"text-gray-700 text-xs mt-3"},"Balance:"," ",u.a.createElement("span",{className:"text-gray-900 ".concat(e.sovBalanceOf.loading&&"skeleton")},Object(S.g)(e.sovBalanceOf.value).toLocaleString())," ","SoV")),u.a.createElement("div",{className:"mb-4"},u.a.createElement($,{value:e.timestamp,onChange:function(t){return e.onChangeTimestamp(t)},kickoffTs:Number(e.kickoff.value),title:"Stake until date"})),u.a.createElement("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded ".concat(!e.isValid&&"opacity-50 cursor-not-allowed"),disabled:!e.isValid},"Stake"))}var Z=a(356),_=a(1286);function ee(e){return u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",{className:"mb-4"},u.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amount"},"Amount to withdraw"),u.a.createElement("div",{className:"flex space-x-4"},u.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"withdraw-amount",type:"text",placeholder:"Amount",value:e.amount,onChange:function(t){return e.onChangeAmount(Object(S.e)(t))}}),u.a.createElement("button",{type:"button",className:"",onClick:function(){return e.onChangeAmount(Object(S.b)(e.balanceOf.value))}},"MAX")),u.a.createElement("div",{className:"text-gray-700 text-xs mt-3"},"Staked balance:"," ",u.a.createElement("span",{className:"text-gray-900 ".concat(e.balanceOf.loading&&"skeleton")},Object(S.g)(e.balanceOf.value).toLocaleString())," ","SoV")),u.a.createElement("div",{className:"flex flex-row justify-between items-center space-x-4"},u.a.createElement("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded ".concat(!e.isValid&&"opacity-50 cursor-not-allowed"),disabled:!e.isValid},"Withdraw"),u.a.createElement("div",null,e.currentLock&&u.a.createElement("div",{className:"text-gray-5 mb-4 text-xs"},"Your tokens are locked until:",u.a.createElement("br",null),u.a.createElement("span",{className:"font-bold"},e.currentLock.toLocaleString())))))}function te(e){return u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",{className:"mb-4"},u.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amount"},"Amount to stake"),u.a.createElement("div",{className:"flex space-x-4"},u.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"stake-amount",type:"text",placeholder:"Amount",value:e.amount,onChange:function(t){return e.onChangeAmount(Object(S.e)(t))}}),u.a.createElement("button",{type:"button",className:"",onClick:function(){return e.onChangeAmount(Object(S.b)(e.sovBalanceOf.value))}},"MAX")),u.a.createElement("div",{className:"text-gray-700 text-xs mt-3"},"Balance:"," ",u.a.createElement("span",{className:"text-gray-900 ".concat(e.sovBalanceOf.loading&&"skeleton")},Object(S.g)(e.sovBalanceOf.value).toLocaleString())," ","SoV")),u.a.createElement("div",{className:"flex flex-row justify-between items-center space-x-4"},u.a.createElement("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded ".concat(!e.isValid&&"opacity-50 cursor-not-allowed"),disabled:!e.isValid},"Stake")))}var ae=a(1276),ne=new Date;function re(e){return Object(_.a)()?u.a.createElement(ce,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,null,u.a.createElement("title",null,"Stake")),u.a.createElement(k.a,null),u.a.createElement("main",null,u.a.createElement("div",{className:"bg-black"},u.a.createElement("div",{className:"container"},u.a.createElement("h2",{className:"text-white pt-20 pb-8"},"Staking"),u.a.createElement("div",{className:"flex flex-col pb-8 md:flex-row md:space-x-4"},u.a.createElement("div",{className:"flex flex-row flex-no-wrap justify-between bg-gray-900 text-white p-3 w-full md:w-1/2 mb-3 md:mb-0"},u.a.createElement("div",null,u.a.createElement("div",{className:"text-white text-xl"},"-----"),u.a.createElement("div",{className:"text-gray-600 text-sm"},"You staked")),u.a.createElement("div",{className:"flex flex-col items-end justify-center w-1/2 border-1 border-red-300"},u.a.createElement("div",{className:"mt-5 w-full"},u.a.createElement(j.a,{value:0,max:100,color:"green"})))),u.a.createElement("div",{className:"flex flex-row flex-no-wrap justify-between bg-gray-900 text-white p-3 w-full md:w-1/2 mb-3 md:mb-0"},u.a.createElement("div",null,u.a.createElement("div",{className:"text-white text-xl"},"-----"),u.a.createElement("div",{className:"text-gray-600 text-sm"},"Your votes")))),u.a.createElement("div",{className:"flex space-x-4"},u.a.createElement("div",{className:"bg-white rounded-t shadow p-3 w-full"},u.a.createElement("h4",{className:"font-bold"},"Staking"))))),u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"flex flex-row space-x-4"},u.a.createElement("div",{className:"w-full bg-white rounded-b shadow p-3"},u.a.createElement("i",null,"Please connect with your wallet to use staking."))))),u.a.createElement(O.a,null))}function ce(e){Object(f.a)({key:g,reducer:p}),Object(f.b)({key:g,saga:h});Object(s.d)(E),Object(s.c)();var t=Object(N.a)(),a=T("staking","balanceOf","0",t||S.c),n=function(e){return T("staking","getCurrentVotes","0",e||S.c)}(t),d=T("staking","kickoffTS","0"),b=B(t),v=B(Object(S.d)("staking").address),x=function(e){return T("staking","currentLock","0",e||S.c)}(t),w=Object(o.useState)(""),A=Object(l.a)(w,2),L=A[0],V=A[1],J=Object(o.useState)(""),R=Object(l.a)(J,2),X=R[0],q=R[1],z=Object(o.useState)(void 0),H=Object(l.a)(z,2),W=H[0],G=H[1],K=Object(o.useState)(!1),Q=Object(l.a)(K,2),_=Q[0],re=Q[1],ce=Object(o.useState)(null),le=Object(l.a)(ce,2),oe=le[0],ue=le[1],se=C(L),ie=C(X);Object(o.useEffect)((function(){ue(new Date(1e3*Number(x.value)))}),[x.value]);var me=Object(o.useCallback)((function(){if(_)return!1;var e=Number(L);return!(!e||isNaN(e)||e<=0)&&(!(!W||W<ne.getTime())&&1e18*e<=Number(b.value))}),[_,L,b,W]),fe=Object(o.useCallback)((function(){if(_)return!1;var e=Number(X);return!(!e||isNaN(e)||e<=0)&&(!(oe&&oe>ne)&&1e18*e<=Number(a.value))}),[_,X,a,oe]),de=Object(o.useCallback)((function(){return!_&&W>=ne.getTime()}),[_,W]),be=Object(o.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),re(!0),e.prev=2,e.next=5,y.a.nonce(t);case 5:return n=e.sent,e.next=8,I(t);case 8:if(c=e.sent,!Object(m.a)(c).lessThan(se)){e.next=13;break}return e.next=12,F(se,t,n);case 12:n+=1;case 13:return e.next=15,D(se,W,t,n);case 15:re(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),re(!1),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),[se,t,W]),ve=Object(o.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),re(!0),e.prev=2,e.next=5,y.a.nonce(t);case 5:return n=e.sent,e.next=8,I(t);case 8:if(c=e.sent,!Object(m.a)(c).lessThan(se)){e.next=13;break}return e.next=12,F(se,t,n);case 12:n+=1;case 13:return e.next=15,M(se,t,n);case 15:re(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),re(!1),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),[se,t]),pe=Object(o.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),re(!0),e.next=4,P(ie,t);case 4:re(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ie,t]),ge=Object(o.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),re(!0),e.prev=2,e.next=5,Y(W/1e3,t);case 5:re(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),re(!1);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[W,t]),xe=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.a)();case 2:return e.t0=e.sent,a=e.t0+1,e.next=6,Object(ae.b)(["0x04fa98E97A376a086e3BcAB99c076CB249e5740D"],["0"],["getBalanceOf(address)"],["0x0000000000000000000000007be508451cd748ba55dcbe75c8067f9420909b49"],"Testing new proposal ".concat(a),t);case 6:case"end":return e.stop()}}),e)}))),[t]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,null,u.a.createElement("title",null,"Stake")),u.a.createElement(k.a,null),u.a.createElement("main",null,u.a.createElement("div",{className:"bg-black"},u.a.createElement("div",{className:"container"},u.a.createElement("h2",{className:"text-white pt-20 pb-8"},"Staking"),u.a.createElement("button",{type:"button",onClick:function(){return xe()}},"Add proposal"),u.a.createElement("div",{className:"flex flex-col pb-8 md:flex-row md:space-x-4"},u.a.createElement("div",{className:"flex flex-row flex-no-wrap justify-between bg-gray-900 text-white p-3 w-full md:w-1/2 mb-3 md:mb-0"},u.a.createElement("div",null,u.a.createElement("div",{className:"text-white text-xl ".concat(a.loading&&"skeleton")},Object(S.g)(a.value).toLocaleString()),u.a.createElement("div",{className:"text-gray-600 text-sm"},"You staked")),u.a.createElement("div",{className:"flex flex-col items-end justify-center w-1/2 border-1 border-red-300"},u.a.createElement("div",{className:"mt-5 w-full"},u.a.createElement(j.a,{value:Object(S.g)(a.value),max:Object(S.g)(v.value),color:"green"})))),u.a.createElement("div",{className:"flex flex-row flex-no-wrap justify-between bg-gray-900 text-white p-3 w-full md:w-1/2 mb-3 md:mb-0"},u.a.createElement("div",null,u.a.createElement("div",{className:"text-white text-xl ".concat(n.loading&&"skeleton")},Object(S.g)(n.value).toLocaleString()),u.a.createElement("div",{className:"text-gray-600 text-sm"},"Your votes")))),u.a.createElement("div",{className:"flex space-x-4"},u.a.createElement("div",{className:"bg-white rounded-t shadow p-3 w-full"},u.a.createElement("h4",{className:"font-bold"},"Staking"))))),u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"flex flex-row space-x-4"},u.a.createElement("div",{className:"w-full bg-white rounded-b shadow p-3"},a.loading?u.a.createElement(u.a.Fragment,null,u.a.createElement(Z.a,null)):u.a.createElement(u.a.Fragment,null,"0"===a.value?u.a.createElement(u.a.Fragment,null,u.a.createElement(U,{handleSubmit:be,amount:L,timestamp:W,onChangeAmount:function(e){return V(e)},onChangeTimestamp:function(e){return G(e)},sovBalanceOf:b,isValid:me(),kickoff:d})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex flex-col space-y-8 md:flex-row md:space-x-8"},u.a.createElement("div",{className:"w-full md:w-1/2"},u.a.createElement("div",null,u.a.createElement(te,{handleSubmit:ve,amount:L,onChangeAmount:function(e){return V(e)},sovBalanceOf:b,isValid:me()})),oe&&"0"!==d.value&&u.a.createElement("div",{className:"mt-3 mb-3 border-t pt-3"},u.a.createElement("form",{onSubmit:ge},u.a.createElement("div",{className:"flex flex-row justify-between items-center space-x-4"},u.a.createElement($,{title:"Extend",kickoffTs:Number(d.value),startTs:oe.getTime(),value:W,onChange:function(e){return G(e)}}),u.a.createElement("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded ".concat(!de()&&"opacity-50 cursor-not-allowed"),disabled:!de()},"Submit"))))),u.a.createElement("div",{className:"w-full mt-5 md:w-1/2 md:mt-0"},u.a.createElement(ee,{handleSubmit:pe,amount:X,onChangeAmount:function(e){return q(e)},balanceOf:a,isValid:fe(),currentLock:oe}))))))))),u.a.createElement(O.a,null))}}}]);