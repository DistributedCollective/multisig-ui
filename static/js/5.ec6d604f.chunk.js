(this["webpackJsonpgovernance-dapp"]=this["webpackJsonpgovernance-dapp"]||[]).push([[5],{1267:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),function(e){e.Pending="0",e.Active="1",e.Canceled="2",e.Defeated="3",e.Succeeded="4",e.Queued="5",e.Expired="6",e.Executed="7"}(n||(n={}));var r=function(e){return{0:"Pending",1:"Active",2:"Canceled",3:"Defeated",4:"Succeeded",5:"Queued",6:"Expired",7:"Executed"}[e]}},1269:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(65),r=Object(n.a)((function(){return a.e(12).then(a.bind(null,1291))}),(function(e){return e.Header}))},1270:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(65),r=Object(n.a)((function(){return a.e(11).then(a.bind(null,1290))}),(function(e){return e.Footer}))},1277:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),c=a(352),l={green:"bg-green-500",red:"bg-red-600",gray:"bg-gray-600",indigo:"bg-indigo-600"};function s(e){var t=Math.min(Math.round(e.value/e.max*100)||0,100);return r.a.createElement("div",{className:"w-full flex flex-row flex-no-wrap items-center justify-between mt-3"},r.a.createElement("div",{className:"bg-opacity-25 ".concat(l[e.color]," h-1 rounded w-full")},r.a.createElement("div",{className:"".concat(l[e.color]," h-1 rounded"),style:{width:"".concat(t,"%")}})),e.showVotes&&r.a.createElement("div",{className:"w-2/6 pl-3 text-xs"},Object(c.f)(e.value)))}},1286:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(86),r=a(205);function c(){var e=Object(n.d)(r.a),t=e.connected,a=e.address;return t&&!!a}},1287:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(354),r=a(105),c=a(0),l=a(86),s=a(45),o=a(205);function i(e,t){for(var a=arguments.length,i=new Array(a>2?a-2:0),u=2;u<a;u++)i[u-2]=arguments[u];var d=Object(l.d)(o.a),m=d.syncBlockNumber,v=Object(c.useState)({value:null,loading:!0,error:null}),f=Object(r.a)(v,2),b=f[0],p=f[1];return Object(c.useEffect)((function(){p((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!0,error:null})}));try{s.a.call(e,t,i).then((function(e){p((function(t){return Object(n.a)(Object(n.a)({},t),{},{value:e,loading:!1,error:null})}))})).catch((function(e){console.error(e),p((function(t){return Object(n.a)(Object(n.a)({},t),{},{loading:!1,value:null,error:e})}))}))}catch(a){p((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1,value:null,error:a})}))}return function(){}}),[e,t,JSON.stringify(i),m]),b}},1293:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(105),r=a(0),c=a.n(r),l=a(86),s=a(154),o=a(205);function i(e){var t=Object(r.useCallback)((function(){if(e.txHash&&e.startLength&&e.endLength){var t=e.txHash.substr(0,e.startLength),a=e.txHash.substr(-e.endLength);return"".concat(t," \xb7\xb7\xb7 ").concat(a)}return e.txHash}),[e.txHash,e.startLength,e.endLength]),a=Object(l.d)(o.a).chainId,i=Object(r.useCallback)((function(){return s.a[a]}),[a]),u=Object(r.useState)(t()),d=Object(n.a)(u,2),m=d[0],v=d[1],f=Object(r.useState)(i()),b=Object(n.a)(f,2),p=b[0],g=b[1];return Object(r.useEffect)((function(){v(t())}),[t,e.txHash,e.startLength,e.endLength]),Object(r.useEffect)((function(){g(i())}),[a,i]),c.a.createElement("a",{className:e.className,href:"".concat(p,"/").concat(e.isAddress?"address":"tx","/").concat(e.txHash),target:"_blank",rel:"noreferrer noopener"},m)}i.defaultProps={startLength:10,endLength:4,className:"ml-1 text-white"}},1300:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(86),r=a(205);function c(){var e=Object(n.d)(r.a).address;return e||""}},1301:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),c=a(1267),l=function(e){switch(e){case c.a.Pending:case c.a.Active:return"border-indigo-700";case c.a.Succeeded:case c.a.Queued:case c.a.Executed:return"border-green-500";case c.a.Canceled:case c.a.Defeated:case c.a.Expired:return"border-gray-500"}},s=function(e){switch(e){case c.a.Pending:case c.a.Active:return"text-indigo-700";case c.a.Succeeded:case c.a.Queued:case c.a.Executed:return"text-green-500";case c.a.Canceled:case c.a.Defeated:case c.a.Expired:return"text-gray-500"}};function o(e){var t=e.state;return r.a.createElement("div",{className:"border rounded py-0 px-1 text-xs ".concat(l(t)," ").concat(s(t)," text-center"),style:{width:"70px"}},function(e){switch(e){case c.a.Pending:return"Pending";case c.a.Active:return"Active";case c.a.Succeeded:case c.a.Queued:case c.a.Executed:return"Passed";case c.a.Canceled:case c.a.Defeated:case c.a.Expired:return"Failed"}}(t))}},1302:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(354),r=a(105),c=a(0),l=a(1267),s=a(45);function o(e){var t=Object(c.useState)({state:l.a.Pending,loading:!0}),a=Object(r.a)(t,2),o=a[0],i=a[1];return Object(c.useEffect)((function(){(null===e||void 0===e?void 0:e.id)&&(i((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!0})})),s.a.call("governorAlpha","state",[e.id]).then((function(e){i((function(t){return Object(n.a)(Object(n.a)({},t),{},{state:e,loading:!1})}))})).catch(console.error))}),[e,i]),o}},1418:function(e,t,a){"use strict";a.r(t),a.d(t,"ProposalDetailsPage",(function(){return C}));var n=a(5),r=a.n(n),c=a(75),l=a(105),s=a(0),o=a.n(s),i=a(207),u=a(120),d=a(353),m=a(1269),v=a(1270),f=a(1277),b=a(352),p=a(45),g=a(1267),x=a(1286),E=a(1293),h=a(1300),j=a(1287);function O(e){var t,a=Object(x.a)(),n=Object(h.a)(),i=Object(j.a)("governorAlpha","getReceipt",e.proposalId,n),u=Object(s.useState)(!1),d=Object(l.a)(u,2),m=d[0],v=d[1],f=Object(s.useState)(""),g=Object(l.a)(f,2),O=g[0],w=g[1],N=Object(s.useCallback)(function(){var t=Object(c.a)(r.a.mark((function t(a){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,p.a.send("governorAlpha","castVote",[e.proposalId,a,{from:n}],{type:"vote"});case 3:c=t.sent,w(c),v(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,e.proposalId]);if(!a||i.loading)return o.a.createElement(o.a.Fragment,null);if(O)return o.a.createElement("div",{className:"bg-gray-900 text-white px-3 py-2 w-2/3"},o.a.createElement("div",{className:"text-xs text-gray-500"},"Vote Cast"),o.a.createElement("div",{className:"truncate text-sm ".concat(m&&"skeleton")},o.a.createElement(E.a,{txHash:O,className:"text-white"})));if(null===i||void 0===i||null===(t=i.value)||void 0===t?void 0:t.hasVoted){var y=i.value;return o.a.createElement("div",{className:"bg-gray-900 text-white px-3 py-2 w-2/3"},o.a.createElement("div",{className:"text-xs text-gray-500"},"You voted"),o.a.createElement("div",{className:"truncate text-sm ".concat(m&&"skeleton")},Object(b.g)(y.votes).toLocaleString()," votes -"," ",y.support?"For":"Against"))}return o.a.createElement("div",{className:"bg-gray-900 text-white px-3 py-2 w-2/3"},o.a.createElement("div",{className:"flex flex-row space-x-4 justify-between items-center"},o.a.createElement("button",{className:"block px-3 py-2 bg-green-500 w-1/2",type:"button",onClick:function(){return N(!0)}},"Vote For"),o.a.createElement("button",{className:"block px-3 py-2 bg-gray-500 w-1/2",type:"button",onClick:function(){return N(!1)}},"Vote Against")))}var w=a(86),N=a(205),y=a(154),k=a(356);function S(e){var t=Object(j.a)("governorAlpha","getActions",e.proposalId||"0"),a=t.loading,n=t.value,r=Object(s.useState)([]),c=Object(l.a)(r,2),i=c[0],u=c[1];return Object(s.useEffect)((function(){if(n){for(var e=n,t=e.calldatas.length,a=[],r=0;r<t;r++)a.push({calldata:e.calldatas[r],target:e.targets[r],value:e.values[r],signature:e.signatures[r]});u(a)}}),[JSON.stringify(n)]),a||!e.proposalId?o.a.createElement("div",{className:"p-3"},o.a.createElement(k.b,null)):o.a.createElement("div",{className:"py-3"},i.map((function(e){return o.a.createElement("div",{className:"bordered-list-item px-5 py-3 flex flex-row space-x-4",key:e.signature},o.a.createElement("div",{className:"truncate w-1/4"},e.target),o.a.createElement("div",{className:"truncate w-1/4"},e.signature),o.a.createElement("div",{className:"truncate w-1/4"},e.calldata),o.a.createElement("div",{className:"truncate w-1/4"},e.value))})))}function A(e){return o.a.createElement("div",{className:"w-3/12 bg-white rounded shadow"},o.a.createElement("div",{className:"px-5 py-3 border-b"},o.a.createElement("h4",{className:"font-bold"},"Proposal history")),e.proposal?o.a.createElement(o.a.Fragment,null,e.proposal&&o.a.createElement("div",{className:"px-5 py-2"},o.a.createElement("div",null,"Active"),o.a.createElement("div",{className:"text-xs text-gray-400"},Object(b.a)(e.proposal.startTime,e.proposal.startBlock,e.proposal.startBlock))),e.proposal&&e.createdEvent&&o.a.createElement("div",{className:"px-5 py-2"},o.a.createElement("div",null,"Created"),o.a.createElement("div",{className:"text-xs text-gray-400"},Object(b.a)(e.proposal.startTime,e.createdEvent.blockNumber,e.createdEvent.blockNumber)))):o.a.createElement("div",{className:"px-5"},o.a.createElement("div",{className:"mt-3 mb-3 skeleton"},"loading"),o.a.createElement("div",{className:"mb-3 skeleton"},"loading"),o.a.createElement("div",{className:"mb-3 skeleton"},"loading")))}var P=a(1301),V=a(1302);function C(){var e,t,a=Object(u.f)().id,n=Object(x.a)(),f=Object(w.d)(N.a).syncBlockNumber,E=Object(s.useState)(null),h=Object(l.a)(E,2),j=h[0],y=h[1],k=Object(s.useState)(null),C=Object(l.a)(k,2),F=C[0],H=C[1],B=Object(s.useState)(!1),D=Object(l.a)(B,2),J=D[0],Q=D[1],q=Object(s.useState)(!0),M=Object(l.a)(q,2),T=M[0],_=M[1],R=Object(s.useState)([]),Y=Object(l.a)(R,2),z=Y[0],G=Y[1];Object(s.useEffect)((function(){Q(!0),function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.call("governorAlpha","proposals",[a]);case 2:return t=e.sent,y(t),e.next=6,p.a.getPastEvents("governorAlpha","ProposalCreated",{id:t.id},t.startBlock-1,t.endBlock);case 6:n=e.sent,H(n[0]),Q(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then().catch()}),[a,f]),Object(s.useEffect)((function(){(null===j||void 0===j?void 0:j.id)&&(_(!0),p.a.getPastEvents("governorAlpha","VoteCast",{proposalId:j.id},j.startBlock,j.endBlock).then((function(e){G(e.map((function(e){var t=e.returnValues;return{support:t.support,voter:t.voter,votes:t.votes}}))),_(!1)})).catch(console.error))}),[JSON.stringify(j),f]);var K=Object(V.a)(j),U=K.state,W=K.loading;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null,o.a.createElement("title",null,"Proposal Details")),o.a.createElement(m.a,null),o.a.createElement("main",null,o.a.createElement("div",{className:"bg-black"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"block text-white pt-8 pb-6"},o.a.createElement(d.b,{to:"/",className:"text-white hover:no-underline hover:text-gray-500"},"< Proposals")),o.a.createElement("div",{className:"pb-8 flex flex-row justify-between"},o.a.createElement("div",null,o.a.createElement("h2",{className:"text-white ".concat(J&&"skeleton")},(null===F||void 0===F||null===(e=F.returnValues)||void 0===e?void 0:e.description)||"No description"),U&&!W&&o.a.createElement(P.a,{state:U})),o.a.createElement("div",{className:"flex flex-row justify-end space-x-4 w-6/12"},(null===j||void 0===j?void 0:j.id)&&n&&U===g.a.Active&&o.a.createElement(O,{proposalId:j.id}),o.a.createElement("div",{className:"bg-gray-900 text-white px-3 py-2 w-1/3"},o.a.createElement("div",{className:"text-xs text-gray-500"},"Proposer"),o.a.createElement("div",{className:"truncate text-sm ".concat(J&&"skeleton")},(null===j||void 0===j?void 0:j.proposer)||"0x00000000000000000")))),o.a.createElement("div",{className:"flex flex-row space-x-4"},o.a.createElement(L,{title:"For",votes:Object(b.g)((null===j||void 0===j?void 0:j.forVotes)||0),maxVotes:Object(b.g)((null===j||void 0===j?void 0:j.quorum)||0),color:"green",loading:J}),o.a.createElement(L,{title:"Against",votes:Object(b.g)((null===j||void 0===j?void 0:j.againstVotes)||0),maxVotes:Object(b.g)((null===j||void 0===j?void 0:j.quorum)||0),color:"gray",loading:J})))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"flex flex-row space-x-4 mb-5"},o.a.createElement(I,{items:z,showSupporters:!0,loading:T}),o.a.createElement(I,{items:z,showSupporters:!1,loading:T})),o.a.createElement("div",{className:"flex flex-row space-x-4"},o.a.createElement("div",{className:"w-9/12 bg-white rounded shadow"},o.a.createElement(S,{proposalId:null===j||void 0===j?void 0:j.id}),o.a.createElement("div",{className:"px-5 py-2"},null===F||void 0===F||null===(t=F.returnValues)||void 0===t?void 0:t.description)),o.a.createElement(A,{proposal:j,createdEvent:F})))),o.a.createElement(v.a,null))}function L(e){return o.a.createElement("div",{className:"bg-white rounded-t shadow p-3 w-1/2 pb-4"},o.a.createElement("div",{className:"flex flex-row justify-between"},o.a.createElement("h4",{className:"font-bold"},e.title),o.a.createElement("h4",{className:"font-bold ".concat(e.loading&&"skeleton")},Object(b.f)(e.votes))),o.a.createElement(f.a,{value:e.votes,max:e.maxVotes,color:e.color}))}function I(e){var t=Object(s.useState)([]),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){r((e.items||[]).filter((function(t){return t.support===e.showSupporters})))}),[e.items,e.showSupporters]),o.a.createElement("div",{className:"bg-white rounded-b shadow w-1/2"},o.a.createElement("div",{className:"flex flex-row justify-between text-gray-500 text-xs font-medium bordered-b-gray px-5 py-2"},o.a.createElement("div",null,n.length," Addresses"),o.a.createElement("div",null,"Votes")),n.length>0&&o.a.createElement("div",{className:"vote-area overflow-y-auto"},n.map((function(t){return o.a.createElement(F,{key:t.voter,voter:t.voter,votes:Object(b.g)(t.votes),loading:e.loading})}))),n.length<3&&o.a.createElement(o.a.Fragment,null,Array(3-n.length).fill(0).map((function(t,a){return o.a.createElement(F,{key:a,loading:e.loading})}))))}function F(e){var t=e.voter,a=e.votes,n=e.loading,r=Object(w.d)(N.a).chainId,c=Object(s.useCallback)((function(){return y.a[r]}),[r]),i=Object(s.useState)(c()),u=Object(l.a)(i,2),d=u[0],m=u[1];return Object(s.useEffect)((function(){m(c())}),[r,c]),n?o.a.createElement("div",{className:"flex flex-row justify-between text-gray-500 transition duration-300 bordered-list-item px-5 py-3"},o.a.createElement("div",{className:"skeleton"},"--------------"),o.a.createElement("div",{className:"skeleton"},"-------")):t||a?o.a.createElement("a",{href:"".concat(d,"/address/").concat(t),target:"_blank",rel:"noreferrer",className:"flex flex-row justify-between text-black transition duration-300 bordered-list-item px-5 py-3 hover:no-underline"},o.a.createElement("div",null,Object(b.h)(t)),o.a.createElement("div",null,Object(b.f)(a))):o.a.createElement("div",{className:"flex flex-row justify-between text-gray-500 transition duration-300 bordered-list-item px-5 py-3"},o.a.createElement("div",null,"-"),o.a.createElement("div",null,"-"))}}}]);